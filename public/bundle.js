var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function r(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let g;function x(t){g=t}const $=[],w=[],y=[],v=[],M=Promise.resolve();let b=!1;function _(t){y.push(t)}let k=!1;const S=new Set;function E(){if(!k){k=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];x(e),L(e.$$)}for($.length=0;w.length;)w.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];S.has(e)||(S.add(e),e())}y.length=0}while($.length);for(;v.length;)v.pop()();b=!1,k=!1,S.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const j=new Set;let A;function D(t,e){t&&t.i&&(j.delete(t),t.i(e))}function C(t,e,n,o){if(t&&t.o){if(j.has(t))return;j.add(t),A.c.push(()=>{j.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function N(t){t&&t.c()}function H(t,n,s){const{fragment:a,on_mount:r,on_destroy:c,after_update:l}=t.$$;a&&a.m(n,s),_(()=>{const n=r.map(e).filter(i);c?c.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(_)}function z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&($.push(t),b||(b=!0,M.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,i,s,a,r,c,d=[-1]){const u=g;x(e);const m=i.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:d};let f=!1;if(p.ctx=s?s(e,m,(t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=i)&&(p.bound[t]&&p.bound[t](i),f&&P(e,t)),n}):[],p.update(),f=!0,o(p.before_update),p.fragment=!!a&&a(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();i.intro&&D(e.$$.fragment),H(e,i.target,i.anchor),E()}x(u)}class O{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const T=[];function I(e,n=t){let o;const i=[];function a(t){if(s(e,t)&&(e=t,o)){const t=!T.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),T.push(n,e)}if(t){for(let t=0;t<T.length;t+=2)T[t][0](T[t+1]);T.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,r=t){const c=[s,r];return i.push(c),1===i.length&&(o=n(a)||t),s(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const V=I("..."),q=I({id:0,temp:"-",humidity:"",windSpeed:""}),F=I({id:[0,0,0,0,0],temp_max:["-","-","-","-","-"],temp:["-","-","-","-","-"],temp_min:["-","-","-","-","-"],updated:!1});function J(e){let n,o,i,s,a,g,x,$,w,y;return{c(){n=d("header"),o=d("div"),i=d("div"),s=m(e[0]),a=p(),g=d("div"),x=u("svg"),$=u("path"),w=u("path"),f(i,"class","w-full text-center text-xl font-bold"),f($,"fill","none"),f($,"d","M24 0H0v24h24z"),f(w,"d","M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"),f(x,"class","h-8 w-8 fill-current mx-auto cursor-pointer"),f(x,"viewBox","0 0 24 24"),f(g,"class","w-full pt-2"),f(o,"class","container flex flex-wrap items-center"),f(n,"class","pt-1 xl:py-4")},m(t,e,l){var d,u,m,p;c(t,n,e),r(n,o),r(o,i),r(i,s),r(o,a),r(o,g),r(g,x),r(x,$),r(x,w),l&&y(),u="click",m=Y,(d=x).addEventListener(u,m,p),y=()=>d.removeEventListener(u,m,p)},p(t,[e]){1&e&&h(s,t[0])},i:t,o:t,d(t){t&&l(n),y()}}}function Y(){document.body.classList.toggle("dark")}function G(t,e,n){let o;return a(t,V,t=>n(0,o=t)),[o]}class K extends O{constructor(t){super(),B(this,t,G,J,s,{})}}function Q(t){let e,n,o,i,s,a,u,g,x,$=t[4].humidity+"",w=t[4].windSpeed+"";return{c(){e=d("span"),n=m("Humedad de "),o=m($),i=m("%"),s=p(),a=d("span"),u=m("Vientos de "),g=m(w),x=m("km/hr"),f(e,"class","pt-2"),f(a,"class","pt-2")},m(t,l){c(t,e,l),r(e,n),r(e,o),r(e,i),c(t,s,l),c(t,a,l),r(a,u),r(a,g),r(a,x)},p(t,e){16&e&&$!==($=t[4].humidity+"")&&h(o,$),16&e&&w!==(w=t[4].windSpeed+"")&&h(g,w)},d(t){t&&l(e),t&&l(s),t&&l(a)}}}function R(e){let n,o,i,s,a,u,g,x,$,w,y,v,M,b,_,k,S,E,L=e[4].temp+"",j="-"!==e[4].temp?"°":"",A=""!==e[4].humidity&&""!==e[4].windSpeed&&Q(e);return{c(){n=d("div"),o=d("div"),o.textContent="Hoy",i=p(),s=d("div"),a=d("span"),u=m(L),g=m(j),x=p(),$=d("span"),w=m(e[0]),y=p(),v=d("div"),M=d("div"),A&&A.c(),b=p(),_=d("div"),k=d("img"),f(o,"class","text-center"),f(a,"class","text-5xl font-semibold mx-auto py-2"),f($,"class","mx-auto"),f(M,"class","w-1/2 flex flex-col text-center pt-8 font-thin"),k.src!==(S=`./images/${e[1]}.png`)&&f(k,"src",S),f(k,"alt",e[2]),f(_,"class","w-1/2"),f(v,"class","flex flex-wrap"),f(s,"class",E=`${e[3]} flex flex-col text-white rounded-xxl shadow-xl`),f(n,"class","container max-w-sm w-full py-6 xs:py-12 xl:py-16 px-4")},m(t,e){c(t,n,e),r(n,o),r(n,i),r(n,s),r(s,a),r(a,u),r(a,g),r(s,x),r(s,$),r($,w),r(s,y),r(s,v),r(v,M),A&&A.m(M,null),r(v,b),r(v,_),r(_,k)},p(t,[e]){16&e&&L!==(L=t[4].temp+"")&&h(u,L),16&e&&j!==(j="-"!==t[4].temp?"°":"")&&h(g,j),1&e&&h(w,t[0]),""!==t[4].humidity&&""!==t[4].windSpeed?A?A.p(t,e):(A=Q(t),A.c(),A.m(M,null)):A&&(A.d(1),A=null),2&e&&k.src!==(S=`./images/${t[1]}.png`)&&f(k,"src",S),4&e&&f(k,"alt",t[2]),8&e&&E!==(E=`${t[3]} flex flex-col text-white rounded-xxl shadow-xl`)&&f(s,"class",E)},i:t,o:t,d(t){t&&l(n),A&&A.d()}}}function U(t,e,n){let o;a(t,q,t=>n(4,o=t));let i=".",s="unknown",r="clima desconocido",c="moonlit-asteroid";return t.$$.update=()=>{if(16&t.$$.dirty&&0!==o.id){let t=[];o.id.toString().split("").forEach(e=>t.push(e)),fetch(`https://erianvc.github.io/API/weather-app/data/group${t[0]}xx.json`).then(t=>t.json()).then(t=>{t.forEach(t=>{t.id===o.id&&(n(0,i=t.title),n(1,s=t.image),n(2,r=t.description))})}).catch(t=>console.log(t))}16&t.$$.dirty&&"-"!==o.temp&&(o.temp>35&&n(3,c="flare"),o.temp>25&&o.temp<36&&n(3,c="blooker-20"),o.temp>10&&o.temp<26&&n(3,c="blue-sky"),o.temp<11&&n(3,c="cool-sky"))},[i,s,r,c,o]}class W extends O{constructor(t){super(),B(this,t,U,R,s,{})}}function X(e){let n,o,i,s,a,u,g,x,$,w,y,v,M,b,_,k,S,E,L,j,A,D,C,N=("-"!==e[1]?`${e[1]}°`:e[1])+"",H=("-"!==e[2]?`${e[2]}°`:e[2])+"",z=("-"!==e[3]?`${e[3]}°`:e[3])+"";return{c(){n=d("div"),o=d("div"),i=m(e[0]),s=p(),a=d("img"),g=p(),x=d("div"),$=m(N),w=p(),y=d("div"),v=d("div"),M=d("div"),M.innerHTML='<svg class="h-6 w-6 mx-auto fill-current text-white"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 01-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"></path></svg>',b=p(),_=d("div"),k=m(H),S=p(),E=d("div"),L=d("div"),L.innerHTML='<svg class="h-6 w-6 mx-auto fill-current text-white"><path d="M15.5 12.5c-.5.4-1 .4-1.6 0L10 8.7l-4 3.8c-.4.4-1 .4-1.5 0-.4-.5-.4-1.2 0-1.7l4.7-4.5a1 1 0 011.6 0l4.7 4.5c.4.5.4 1.2 0 1.7z"></path></svg>',j=p(),A=d("div"),D=m(z),f(o,"class","py-2"),f(a,"class","h-16 mx-auto"),a.src!==(u="./images/"+e[4]+".png")&&f(a,"src",u),f(a,"alt",e[5]),f(x,"class","text-lg"),f(M,"class","w-full"),f(_,"class","w-full"),f(v,"class","w-1/2"),f(L,"class","w-full"),f(A,"class","w-full"),f(E,"class","w-1/2"),f(y,"class","flex flex-wrap"),f(n,"class",C=`${e[6]} flex-none w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 h-48 mx-3 lg:mx-4 text-white rounded-xl shadow-md`)},m(t,e){c(t,n,e),r(n,o),r(o,i),r(n,s),r(n,a),r(n,g),r(n,x),r(x,$),r(n,w),r(n,y),r(y,v),r(v,M),r(v,b),r(v,_),r(_,k),r(y,S),r(y,E),r(E,L),r(E,j),r(E,A),r(A,D)},p(t,[e]){1&e&&h(i,t[0]),16&e&&a.src!==(u="./images/"+t[4]+".png")&&f(a,"src",u),32&e&&f(a,"alt",t[5]),2&e&&N!==(N=("-"!==t[1]?`${t[1]}°`:t[1])+"")&&h($,N),4&e&&H!==(H=("-"!==t[2]?`${t[2]}°`:t[2])+"")&&h(k,H),8&e&&z!==(z=("-"!==t[3]?`${t[3]}°`:t[3])+"")&&h(D,z),64&e&&C!==(C=`${t[6]} flex-none w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 h-48 mx-3 lg:mx-4 text-white rounded-xl shadow-md`)&&f(n,"class",C)},i:t,o:t,d(t){t&&l(n)}}}function Z(t,e,n){let{updated:o}=e,{id:i}=e,{dayName:s}=e,{temp:a}=e,{tempMin:r}=e,{tempMax:c}=e,l=".",d="unknown",u="clima desconocido",m="moonlit-asteroid";return t.$set=t=>{"updated"in t&&n(7,o=t.updated),"id"in t&&n(8,i=t.id),"dayName"in t&&n(0,s=t.dayName),"temp"in t&&n(1,a=t.temp),"tempMin"in t&&n(2,r=t.tempMin),"tempMax"in t&&n(3,c=t.tempMax)},t.$$.update=()=>{if(384&t.$$.dirty&&o){let t=[];i.toString().split("").forEach(e=>t.push(e)),fetch(`https://erianvc.github.io/API/weather-app/data/group${t[0]}xx.json`).then(t=>t.json()).then(t=>{t.forEach(t=>{t.id===i&&(l=t.title,n(4,d=t.image),n(5,u=t.description))})}).catch(t=>console.log(t))}2&t.$$.dirty&&"-"!==a&&(a>35&&n(6,m="flare"),a>25&&a<36&&n(6,m="blooker-20"),a>10&&a<26&&n(6,m="blue-sky"),a<11&&n(6,m="cool-sky"))},[s,a,r,c,d,u,m,o,i]}class tt extends O{constructor(t){super(),B(this,t,Z,X,s,{updated:7,id:8,dayName:0,temp:1,tempMin:2,tempMax:3})}}function et(t,e,n){const o=t.slice();return o[6]=e[n],o[8]=n,o}function nt(t){let e;const n=new tt({props:{updated:t[0].updated,id:t[0].id[t[8]],dayName:t[1][t[8]],temp:t[0].temp[t[8]],tempMin:t[0].temp_min[t[8]],tempMax:t[0].temp_max[t[8]]}});return{c(){N(n.$$.fragment)},m(t,o){H(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.updated=t[0].updated),1&e&&(o.id=t[0].id[t[8]]),1&e&&(o.temp=t[0].temp[t[8]]),1&e&&(o.tempMin=t[0].temp_min[t[8]]),1&e&&(o.tempMax=t[0].temp_max[t[8]]),n.$set(o)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){C(n.$$.fragment,t),e=!1},d(t){z(n,t)}}}function ot(t){let e,n,i,s,a,u,m,h,g=Array(5),x=[];for(let e=0;e<g.length;e+=1)x[e]=nt(et(t,g,e));const $=t=>C(x[t],1,1,()=>{x[t]=null});return{c(){e=d("div"),e.textContent="Pronóstico de la semana",n=p(),i=d("div"),s=d("div"),s.textContent="Don't see me",a=p();for(let t=0;t<x.length;t+=1)x[t].c();u=p(),m=d("div"),m.textContent="Don't see me",f(e,"class","pt-2 text-center text-lg font-bold"),f(s,"class","flex-none w-1/5 sm:w-1/3 md:w-2/5 md:-mx-4 invisible lg:hidden"),f(m,"class","flex-none w-1/5 sm:w-1/3 md:w-2/5 md:-mx-4 invisible lg:hidden"),f(i,"class","flex flex-no-wrap lg:flex-wrap justify-between lg:justify-center pt-4 pb-2 xs:pb-4 overflow-y-hidden text-center")},m(t,o){c(t,e,o),c(t,n,o),c(t,i,o),r(i,s),r(i,a);for(let t=0;t<x.length;t+=1)x[t].m(i,null);r(i,u),r(i,m),h=!0},p(t,[e]){if(3&e){let n;for(g=Array(5),n=0;n<g.length;n+=1){const o=et(t,g,n);x[n]?(x[n].p(o,e),D(x[n],1)):(x[n]=nt(o),x[n].c(),D(x[n],1),x[n].m(i,u))}for(A={r:0,c:[],p:A},n=g.length;n<x.length;n+=1)$(n);A.r||o(A.c),A=A.p}},i(t){if(!h){for(let t=0;t<g.length;t+=1)D(x[t]);h=!0}},o(t){x=x.filter(Boolean);for(let t=0;t<x.length;t+=1)C(x[t]);h=!1},d(t){t&&l(e),t&&l(n),t&&l(i),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(x,t)}}}function it(t,e,n){let o;a(t,F,t=>n(0,o=t));const i=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],s=(new Date).getDay(),r=function(){let t=[];for(let e=s+1;e<s+6;e++)if(e>6){const n=i[e-7];t.push(n)}else{const n=i[e];t.push(n)}return t}();return[o,r]}class st extends O{constructor(t){super(),B(this,t,it,ot,s,{})}}function at(e){let n,o,i;const s=new K({}),a=new W({}),r=new st({});return{c(){N(s.$$.fragment),n=p(),N(a.$$.fragment),o=p(),N(r.$$.fragment)},m(t,e){H(s,t,e),c(t,n,e),H(a,t,e),c(t,o,e),H(r,t,e),i=!0},p:t,i(t){i||(D(s.$$.fragment,t),D(a.$$.fragment,t),D(r.$$.fragment,t),i=!0)},o(t){C(s.$$.fragment,t),C(a.$$.fragment,t),C(r.$$.fragment,t),i=!1},d(t){z(s,t),t&&l(n),z(a,t),t&&l(o),z(r,t)}}}const rt={enableHighAccuracy:!1,maximumAge:3e4,timeout:3e3};async function ct(){let t=await async function(){return await fetch("/.netlify/functions/ipclient").then(t=>t.json())}().then(t=>t.loc.split(",")),e=await lt("weather",t[0].trim(),t[1].trim()),n=await lt("forecast",t[0].trim(),t[1].trim());dt(`${e.name}, ${e.sys.country}`),ut(e),mt(n)}async function lt(t,e,n){return await fetch(`/.netlify/functions/weather?mode=${t}&lat=${e}&lon=${n}`).then(t=>t.json())}function dt(t){V.update(e=>t)}function ut(t){let e={id:t.weather[0].id,temp:t.main.temp,humidity:t.main.humidity,windSpeed:t.wind.speed};q.update(t=>e)}function mt(t){let e=function(t){let e=function(){const t=new Date;let e=[];for(let n=0;n<6;n++){const o=new Date(t);o.setDate(o.getDate()+n);const i=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"00")}-${o.getDate().toString().padStart(2,"00")}`;e.push(i)}return e}(),n=[{day:e[1],ids:[],temps:[[],[],[]]},{day:e[2],ids:[],temps:[[],[],[]]},{day:e[3],ids:[],temps:[[],[],[]]},{day:e[4],ids:[],temps:[[],[],[]]},{day:e[5],ids:[],temps:[[],[],[]]}];t.list.forEach(t=>{n.forEach(e=>{t.dt_txt.includes(e.day)&&(e.ids.push(t.weather[0].id),e.temps[0].push(t.main.temp_min),e.temps[1].push(t.main.temp),e.temps[2].push(t.main.temp_max))})});let o=[null];for(let t=0;t<n.length;t++)o.push({id:(i=n[t].ids,i[Math.floor(i.length/2)]),tempMin:Math.round(Math.min(...n[t].temps[0])),temp:Math.round(pt(n[t].temps[1])),tempMax:Math.round(Math.max(...n[t].temps[2]))});var i;return o}(t),n={id:[e[1].id,e[2].id,e[3].id,e[4].id,e[5].id],temp_max:[e[1].tempMax,e[2].tempMax,e[3].tempMax,e[4].tempMax,e[5].tempMax],temp:[e[1].temp,e[2].temp,e[3].temp,e[4].temp,e[5].temp],temp_min:[e[1].tempMin,e[2].tempMin,e[3].tempMin,e[4].tempMin,e[5].tempMin],updated:!0};F.update(t=>n)}function pt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return Math.round(e/t.length)}return async function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((async function(t){let e=await lt("weather",t.coords.latitude,t.coords.longitude),n=await lt("forecast",t.coords.latitude,t.coords.longitude);dt(`${e.name}, ${e.sys.country}`),ut(e),mt(n)}),ct,rt):ct();window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.toggle("dark")}(),new class extends O{constructor(t){super(),B(this,t,null,at,s,{})}}({target:document.body})}();
