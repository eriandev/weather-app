var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function r(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let g;function x(t){g=t}const $=[],w=[],y=[],M=[],v=Promise.resolve();let b=!1;function _(t){y.push(t)}let S=!1;const D=new Set;function k(){if(!S){S=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];x(e),A(e.$$)}for($.length=0;w.length;)w.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];D.has(e)||(D.add(e),e())}y.length=0}while($.length);for(;M.length;)M.pop()();b=!1,S=!1,D.clear()}}function A(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const E=new Set;let j;function N(t,e){t&&t.i&&(E.delete(t),t.i(e))}function C(t,e,n,i){if(t&&t.o){if(E.has(t))return;E.add(t),j.c.push(()=>{E.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}function F(t){t&&t.c()}function Y(t,n,s){const{fragment:o,on_mount:r,on_destroy:l,after_update:c}=t.$$;o&&o.m(n,s),_(()=>{const n=r.map(e).filter(a);l?l.push(...n):i(n),t.$$.on_mount=[]}),c.forEach(_)}function H(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function L(t,e){-1===t.$$.dirty[0]&&($.push(t),b||(b=!0,v.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,a,s,o,r,l,d=[-1]){const u=g;x(e);const m=a.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:d};let f=!1;if(p.ctx=s?s(e,m,(t,n,...i)=>{const a=i.length?i[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=a)&&(p.bound[t]&&p.bound[t](a),f&&L(e,t)),n}):[],p.update(),f=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();a.intro&&N(e.$$.fragment),Y(e,a.target,a.anchor),k()}x(u)}class z{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const B=[];function O(e,n=t){let i;const a=[];function o(t){if(s(e,t)&&(e=t,i)){const t=!B.length;for(let t=0;t<a.length;t+=1){const n=a[t];n[1](),B.push(n,e)}if(t){for(let t=0;t<B.length;t+=2)B[t][0](B[t+1]);B.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,r=t){const l=[s,r];return a.push(l),1===a.length&&(i=n(o)||t),s(e),()=>{const t=a.indexOf(l);-1!==t&&a.splice(t,1),0===a.length&&(i(),i=null)}}}}const T=O("..."),I=O({id:0,temp:"-",humidity:"",windSpeed:""}),V=O({id:[0,0,0,0,0],temp_max:["-","-","-","-","-"],temp:["-","-","-","-","-"],temp_min:["-","-","-","-","-"],updated:!1});function q(e){let n,i,a,s;return{c(){n=d("header"),i=d("div"),a=d("div"),s=m(e[0]),f(a,"class","w-full text-center text-xl font-bold"),f(i,"class","container flex flex-wrap items-center"),f(n,"class","pt-1 xl:py-4")},m(t,e){l(t,n,e),r(n,i),r(i,a),r(a,s)},p(t,[e]){1&e&&h(s,t[0])},i:t,o:t,d(t){t&&c(n)}}}function J(t,e,n){let i;return o(t,T,t=>n(0,i=t)),[i]}class U extends z{constructor(t){super(),P(this,t,J,q,s,{})}}function G(t){let e,n,i,a,s,o,u,g,x,$=t[4].humidity+"",w=t[4].windSpeed+"";return{c(){e=d("span"),n=m("Humedad de "),i=m($),a=m("%"),s=p(),o=d("span"),u=m("Vientos de "),g=m(w),x=m("km/hr"),f(e,"class","pt-2"),f(o,"class","pt-2")},m(t,c){l(t,e,c),r(e,n),r(e,i),r(e,a),l(t,s,c),l(t,o,c),r(o,u),r(o,g),r(o,x)},p(t,e){16&e&&$!==($=t[4].humidity+"")&&h(i,$),16&e&&w!==(w=t[4].windSpeed+"")&&h(g,w)},d(t){t&&c(e),t&&c(s),t&&c(o)}}}function K(e){let n,i,a,s,o,u,g,x,$,w,y,M,v,b,_,S,D,k,A=e[4].temp+"",E="-"!==e[4].temp?"°":"",j=""!==e[4].humidity&&""!==e[4].windSpeed&&G(e);return{c(){n=d("div"),i=d("div"),i.textContent="Hoy",a=p(),s=d("div"),o=d("span"),u=m(A),g=m(E),x=p(),$=d("span"),w=m(e[0]),y=p(),M=d("div"),v=d("div"),j&&j.c(),b=p(),_=d("div"),S=d("img"),f(i,"class","text-center text-gray-800"),f(o,"class","text-5xl font-semibold mx-auto py-2"),f($,"class","mx-auto"),f(v,"class","w-1/2 flex flex-col text-center pt-8 font-thin"),S.src!==(D=`./images/${e[1]}.png`)&&f(S,"src",D),f(S,"alt",e[2]),f(_,"class","w-1/2"),f(M,"class","flex flex-wrap"),f(s,"class",k=`${e[3]} flex flex-col text-white rounded-xxl shadow-xl`),f(n,"class","container max-w-sm w-full py-6 xs:py-12 xl:py-16 px-4")},m(t,e){l(t,n,e),r(n,i),r(n,a),r(n,s),r(s,o),r(o,u),r(o,g),r(s,x),r(s,$),r($,w),r(s,y),r(s,M),r(M,v),j&&j.m(v,null),r(M,b),r(M,_),r(_,S)},p(t,[e]){16&e&&A!==(A=t[4].temp+"")&&h(u,A),16&e&&E!==(E="-"!==t[4].temp?"°":"")&&h(g,E),1&e&&h(w,t[0]),""!==t[4].humidity&&""!==t[4].windSpeed?j?j.p(t,e):(j=G(t),j.c(),j.m(v,null)):j&&(j.d(1),j=null),2&e&&S.src!==(D=`./images/${t[1]}.png`)&&f(S,"src",D),4&e&&f(S,"alt",t[2]),8&e&&k!==(k=`${t[3]} flex flex-col text-white rounded-xxl shadow-xl`)&&f(s,"class",k)},i:t,o:t,d(t){t&&c(n),j&&j.d()}}}function Q(t,e,n){let i;o(t,I,t=>n(4,i=t));let a=".",s="unknown",r="clima desconocido",l="moonlit-asteroid";return t.$$.update=()=>{if(16&t.$$.dirty&&0!==i.id){let t=[];i.id.toString().split("").forEach(e=>t.push(e)),fetch(`https://erianvc.github.io/API/weather-app/data/group${t[0]}xx.json`).then(t=>t.json()).then(t=>{t.forEach(t=>{t.id===i.id&&(n(0,a=t.title),n(1,s=t.image),n(2,r=t.description))})}).catch(t=>console.log(t))}16&t.$$.dirty&&"-"!==i.temp&&(i.temp>35&&n(3,l="flare"),i.temp>25&&i.temp<36&&n(3,l="blooker-20"),i.temp>10&&i.temp<26&&n(3,l="blue-sky"),i.temp<11&&n(3,l="cool-sky"))},[a,s,r,l,i]}class R extends z{constructor(t){super(),P(this,t,Q,K,s,{})}}function W(e){let n,i,a,s,o,g,x,$,w,y,M,v,b,_,S,D,k,A,E,j,N,C,F,Y,H,L,P,z,B,O,T,I,V,q,J=("-"!==e[1]?`${e[1]}°`:e[1])+"",U=("-"!==e[2]?`${e[2]}°`:e[2])+"",G=("-"!==e[3]?`${e[3]}°`:e[3])+"";return{c(){n=d("div"),i=d("div"),a=m(e[0]),s=p(),o=d("img"),x=p(),$=d("div"),w=m(J),y=p(),M=d("div"),v=d("div"),b=d("div"),b.innerHTML='<svg class="h-6 w-6 mx-auto fill-current text-white"><use href="#arrow-down"></use></svg>',_=p(),S=d("div"),D=m(U),k=p(),A=d("div"),E=d("div"),E.innerHTML='<svg class="h-6 w-6 mx-auto fill-current text-white"><use href="#arrow-up"></use></svg>',j=p(),N=d("div"),C=m(G),Y=p(),H=u("svg"),L=u("defs"),P=u("symbol"),z=u("title"),B=m("Arrow Down"),O=u("path"),T=u("symbol"),I=u("title"),V=m("Arrow Up"),q=u("path"),f(i,"class","py-2"),f(o,"class","h-16 mx-auto"),o.src!==(g="./images/"+e[4]+".png")&&f(o,"src",g),f(o,"alt",e[5]),f($,"class","text-lg"),f(b,"class","w-full"),f(S,"class","w-full"),f(v,"class","w-1/2"),f(E,"class","w-full"),f(N,"class","w-full"),f(A,"class","w-1/2"),f(M,"class","flex flex-wrap"),f(n,"class",F=`${e[6]} flex-none w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 h-48 mx-3 lg:mx-4 text-white rounded-xl shadow-md`),f(O,"d","M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 01-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"),f(P,"id","arrow-down"),f(P,"viewBox","0 0 20 20"),f(q,"d","M15.5 12.5c-.5.4-1 .4-1.6 0L10 8.7l-4 3.8c-.4.4-1 .4-1.5 0-.4-.5-.4-1.2 0-1.7l4.7-4.5a1 1 0 011.6 0l4.7 4.5c.4.5.4 1.2 0 1.7z"),f(T,"id","arrow-up"),f(T,"viewBox","0 0 20 20"),f(H,"hidden","hidden")},m(t,e){l(t,n,e),r(n,i),r(i,a),r(n,s),r(n,o),r(n,x),r(n,$),r($,w),r(n,y),r(n,M),r(M,v),r(v,b),r(v,_),r(v,S),r(S,D),r(M,k),r(M,A),r(A,E),r(A,j),r(A,N),r(N,C),l(t,Y,e),l(t,H,e),r(H,L),r(L,P),r(P,z),r(z,B),r(P,O),r(L,T),r(T,I),r(I,V),r(T,q)},p(t,[e]){1&e&&h(a,t[0]),16&e&&o.src!==(g="./images/"+t[4]+".png")&&f(o,"src",g),32&e&&f(o,"alt",t[5]),2&e&&J!==(J=("-"!==t[1]?`${t[1]}°`:t[1])+"")&&h(w,J),4&e&&U!==(U=("-"!==t[2]?`${t[2]}°`:t[2])+"")&&h(D,U),8&e&&G!==(G=("-"!==t[3]?`${t[3]}°`:t[3])+"")&&h(C,G),64&e&&F!==(F=`${t[6]} flex-none w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 h-48 mx-3 lg:mx-4 text-white rounded-xl shadow-md`)&&f(n,"class",F)},i:t,o:t,d(t){t&&c(n),t&&c(Y),t&&c(H)}}}function X(t,e,n){let{updated:i}=e,{id:a}=e,{dayName:s}=e,{temp:o}=e,{tempMin:r}=e,{tempMax:l}=e,c=".",d="unknown",u="clima desconocido",m="moonlit-asteroid";return t.$set=t=>{"updated"in t&&n(7,i=t.updated),"id"in t&&n(8,a=t.id),"dayName"in t&&n(0,s=t.dayName),"temp"in t&&n(1,o=t.temp),"tempMin"in t&&n(2,r=t.tempMin),"tempMax"in t&&n(3,l=t.tempMax)},t.$$.update=()=>{if(384&t.$$.dirty&&i){let t=[];a.toString().split("").forEach(e=>t.push(e)),fetch(`https://erianvc.github.io/API/weather-app/data/group${t[0]}xx.json`).then(t=>t.json()).then(t=>{t.forEach(t=>{t.id===a&&(c=t.title,n(4,d=t.image),n(5,u=t.description))})}).catch(t=>console.log(t))}2&t.$$.dirty&&"-"!==o&&(o>35&&n(6,m="flare"),o>25&&o<36&&n(6,m="blooker-20"),o>10&&o<26&&n(6,m="blue-sky"),o<11&&n(6,m="cool-sky"))},[s,o,r,l,d,u,m,i,a]}class Z extends z{constructor(t){super(),P(this,t,X,W,s,{updated:7,id:8,dayName:0,temp:1,tempMin:2,tempMax:3})}}function tt(t,e,n){const i=t.slice();return i[6]=e[n],i[8]=n,i}function et(t){let e;const n=new Z({props:{updated:t[0].updated,id:t[0].id[t[8]],dayName:t[1][t[8]],temp:t[0].temp[t[8]],tempMin:t[0].temp_min[t[8]],tempMax:t[0].temp_max[t[8]]}});return{c(){F(n.$$.fragment)},m(t,i){Y(n,t,i),e=!0},p(t,e){const i={};1&e&&(i.updated=t[0].updated),1&e&&(i.id=t[0].id[t[8]]),1&e&&(i.temp=t[0].temp[t[8]]),1&e&&(i.tempMin=t[0].temp_min[t[8]]),1&e&&(i.tempMax=t[0].temp_max[t[8]]),n.$set(i)},i(t){e||(N(n.$$.fragment,t),e=!0)},o(t){C(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function nt(t){let e,n,a,s,o,u,m,h,g=Array(5),x=[];for(let e=0;e<g.length;e+=1)x[e]=et(tt(t,g,e));const $=t=>C(x[t],1,1,()=>{x[t]=null});return{c(){e=d("div"),e.textContent="Próximamente",n=p(),a=d("div"),s=d("div"),s.textContent="Don't see me",o=p();for(let t=0;t<x.length;t+=1)x[t].c();u=p(),m=d("div"),m.textContent="Don't see me",f(e,"class","py-3 text-center text-lg font-bold"),f(s,"class","flex-none w-1/5 sm:w-1/3 md:w-2/5 md:-mx-4 invisible lg:hidden"),f(m,"class","flex-none w-1/5 sm:w-1/3 md:w-2/5 md:-mx-4 invisible lg:hidden"),f(a,"class","flex flex-no-wrap lg:flex-wrap justify-between lg:justify-center py-4 overflow-y-hidden text-center svelte-kzk0rt")},m(t,i){l(t,e,i),l(t,n,i),l(t,a,i),r(a,s),r(a,o);for(let t=0;t<x.length;t+=1)x[t].m(a,null);r(a,u),r(a,m),h=!0},p(t,[e]){if(3&e){let n;for(g=Array(5),n=0;n<g.length;n+=1){const i=tt(t,g,n);x[n]?(x[n].p(i,e),N(x[n],1)):(x[n]=et(i),x[n].c(),N(x[n],1),x[n].m(a,u))}for(j={r:0,c:[],p:j},n=g.length;n<x.length;n+=1)$(n);j.r||i(j.c),j=j.p}},i(t){if(!h){for(let t=0;t<g.length;t+=1)N(x[t]);h=!0}},o(t){x=x.filter(Boolean);for(let t=0;t<x.length;t+=1)C(x[t]);h=!1},d(t){t&&c(e),t&&c(n),t&&c(a),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(x,t)}}}function it(t,e,n){let i;o(t,V,t=>n(0,i=t));const a=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],s=(new Date).getDay(),r=function(){let t=[];for(let e=s+1;e<s+6;e++)if(e>6){const n=a[e-7];t.push(n)}else{const n=a[e];t.push(n)}return t}();return[i,r]}class at extends z{constructor(t){super(),P(this,t,it,nt,s,{})}}function st(e){let n,i,a;const s=new U({}),o=new R({}),r=new at({});return{c(){F(s.$$.fragment),n=p(),F(o.$$.fragment),i=p(),F(r.$$.fragment)},m(t,e){Y(s,t,e),l(t,n,e),Y(o,t,e),l(t,i,e),Y(r,t,e),a=!0},p:t,i(t){a||(N(s.$$.fragment,t),N(o.$$.fragment,t),N(r.$$.fragment,t),a=!0)},o(t){C(s.$$.fragment,t),C(o.$$.fragment,t),C(r.$$.fragment,t),a=!1},d(t){H(s,t),t&&c(n),H(o,t),t&&c(i),H(r,t)}}}const ot={enableHighAccuracy:!1,maximumAge:3e4,timeout:3e3};async function rt(){let t=await async function(){return await fetch("/.netlify/functions/ipclient").then(t=>t.json())}().then(t=>t.loc.split(",")),e=await lt("weather",t[0].trim(),t[1].trim()),n=await lt("forecast",t[0].trim(),t[1].trim());ct(`${e.name}, ${e.sys.country}`),ut(n),dt(e)}async function lt(t,e,n){return await fetch(`/.netlify/functions/weather?mode=${t}&lat=${e}&lon=${n}`).then(t=>t.json())}function ct(t){T.update(e=>t)}function dt(t){let e={id:t.weather[0].id,temp:t.main.temp,humidity:t.main.humidity,windSpeed:t.wind.speed};I.update(t=>e)}function ut(t){let e=function(){const t=new Date(2020,2,22,12,0,0,0),e=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"00")}-${t.getDate().toString().padStart(2,"00")}`,n=new Date(t);n.setDate(n.getDate()+1);const i=`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"00")}-${n.getDate().toString().padStart(2,"00")}`,a=new Date(t);a.setDate(a.getDate()+2);const s=`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"00")}-${a.getDate().toString().padStart(2,"00")}`,o=new Date(t);o.setDate(o.getDate()+3);const r=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"00")}-${o.getDate().toString().padStart(2,"00")}`,l=new Date(t);l.setDate(l.getDate()+4);const c=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"00")}-${l.getDate().toString().padStart(2,"00")}`,d=new Date(t);d.setDate(d.getDate()+5);const u=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"00")}-${d.getDate().toString().padStart(2,"00")}`;return[e,i,s,r,c,u]}(),n={ids:[],temps:[[],[],[]]},i={ids:[],temps:[[],[],[]]},a={ids:[],temps:[[],[],[]]},s={ids:[],temps:[[],[],[]]},o={ids:[],temps:[[],[],[]]};t.list.forEach(t=>{t.dt_txt.includes(e[1])&&(n.ids.push(t.weather[0].id),n.temps[0].push(t.main.temp_min),n.temps[1].push(t.main.temp),n.temps[2].push(t.main.temp_max)),t.dt_txt.includes(e[2])&&(i.ids.push(t.weather[0].id),i.temps[0].push(t.main.temp_min),i.temps[1].push(t.main.temp),i.temps[2].push(t.main.temp_max)),t.dt_txt.includes(e[3])&&(a.ids.push(t.weather[0].id),a.temps[0].push(t.main.temp_min),a.temps[1].push(t.main.temp),a.temps[2].push(t.main.temp_max)),t.dt_txt.includes(e[4])&&(s.ids.push(t.weather[0].id),s.temps[0].push(t.main.temp_min),s.temps[1].push(t.main.temp),s.temps[2].push(t.main.temp_max)),t.dt_txt.includes(e[5])&&(o.ids.push(t.weather[0].id),o.temps[0].push(t.main.temp_min),o.temps[1].push(t.main.temp),o.temps[2].push(t.main.temp_max))});let r=[mt(n.ids),[Math.round(Math.min(...n.temps[0])),pt(n.temps[1]),Math.round(Math.max(...n.temps[2]))]],l=[mt(i.ids),[Math.round(Math.min(...i.temps[0])),pt(i.temps[1]),Math.round(Math.max(...i.temps[2]))]],c=[mt(a.ids),[Math.round(Math.min(...a.temps[0])),pt(a.temps[1]),Math.round(Math.max(...a.temps[2]))]],d=[mt(s.ids),[Math.round(Math.min(...s.temps[0])),pt(s.temps[1]),Math.round(Math.max(...s.temps[2]))]],u=[mt(o.ids),[Math.round(Math.min(...o.temps[0])),pt(o.temps[1]),Math.round(Math.max(...o.temps[2]))]],m={id:[r[0],l[0],c[0],d[0],u[0]],temp_max:[r[1][2],l[1][2],c[1][2],d[1][2],u[1][2]],temp:[r[1][1],l[1][1],c[1][1],d[1][1],u[1][1]],temp_min:[r[1][0],l[1][0],c[1][0],d[1][0],u[1][0]],updated:!0};V.update(t=>m)}function mt(t){return t[Math.floor(t.length/2)]}function pt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return Math.round(e/t.length)}return async function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((async function(t){let e=await lt("weather",t.coords.latitude,t.coords.longitude),n=await lt("forecast",t.coords.latitude,t.coords.longitude);ct(`${e.name}, ${e.sys.country}`),dt(e),ut(n)}),rt,ot):(console.warn("No hay geolocalización disponible"),rt())}(),new class extends z{constructor(t){super(),P(this,t,null,st,s,{})}}({target:document.body})}();
